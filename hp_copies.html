<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hopy Pay: Otimize sua Jornada do Cliente</title>
    <!-- Inclui o Tailwind CSS via CDN para estilos rápidos e responsivos -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .funnel-segment {
            transition: all 0.3s ease-in-out;
        }
        .funnel-segment:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .funnel-arrow {
            position: relative;
            height: 3rem; /* Altura da seta */
            width: 100%;
        }
        .funnel-arrow::after {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            width: 2px; /* Espessura da linha da seta */
            height: 100%;
            background-color: #4B5563; /* Cor da linha da seta */
            transform: translateX(-50%);
        }
        .funnel-arrow::before {
            content: '';
            position: absolute;
            left: 50%;
            bottom: 0;
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 10px solid #4B5563; /* Cor da ponta da seta */
            transform: translateX(-50%);
        }
        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left: 4px solid #3498db;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <div class="bg-white p-8 rounded-lg shadow-xl max-w-2xl w-full">
        <h1 class="text-3xl font-bold text-gray-800 text-center mb-8">Hopy Pay: Sua Jornada do Cliente Otimizada</h1>
        <p class="text-center text-gray-600 mb-8">Um benefício gratuito da Hopy Pay para clientes e não clientes, ajudando empresas a escalar com estratégias de marketing.</p>

        <!-- Topo do Funil (ToFu) -->
        <div class="funnel-segment bg-blue-100 border-2 border-blue-400 rounded-lg p-6 mb-6 relative">
            <h2 class="text-xl font-bold text-blue-800 mb-2">TOPO DO FUNIL (ToFu)</h2>
            <p class="text-blue-700 text-sm mb-4">Consciência e Descoberta</p>
            <div class="flex items-center mb-2">
                <svg class="w-5 h-5 text-blue-600 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 100-2 1 1 0 000 2zm7-1a1 1 0 10-2 0v2H7v2h5a1 1 0 00.95-1.11L14 10.5V9a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>
                <p class="text-gray-800 font-semibold">Ações do Usuário:</p>
            </div>
            <ul class="list-disc list-inside text-gray-700 text-sm space-y-1 ml-6">
                <li>Visitou Home Page</li>
                <li>Visitou Páginas Genéricas (ex: "Quem Somos", "Desenvolvimento")</li>
            </ul>
            <div class="flex items-center mt-4">
                <svg class="w-5 h-5 text-blue-600 mr-2" fill="currentColor" viewBox="0 0 20 20"><path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path><path fill-rule="evenodd" d="M4 5a2 2 0 012-2V1a1 1 0 011-1h2a1 1 0 011 1v2h2a2 2 0 012 2v10a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 0h6v10H7V5z" clip-rule="evenodd"></path></svg>
                <p class="text-gray-800 font-semibold">Eventos de Medição:</p>
            </div>
            <ul class="list-disc list-inside text-gray-700 text-sm space-y-1 ml-6">
                <li><code class="font-mono bg-blue-200 px-1 rounded">PageView</code> (URLs genéricas como <code class="font-mono bg-blue-200 px-1 rounded">/</code>, <code class="font-mono bg-blue-200 px-1 rounded">/quem-somos</code>, <code class="font-mono bg-blue-200 px-1 rounded">/desenvolvimento</code>)</li>
            </ul>

            <div class="mt-6 border-t border-blue-300 pt-4">
                <h3 class="text-lg font-bold text-blue-800 mb-2">Estratégia de Anúncios (Instagram - Retargeting)</h3>
                <div class="mb-2">
                    <p class="font-semibold text-gray-700">Tipo de Anúncio:</p>
                    <ul class="list-disc list-inside text-gray-700 text-sm ml-4">
                        <li>**Meta Ads:** Vídeos curtos (15-30s), carrossel de imagens com a proposta de valor.</li>
                        <li>**Google Display Network (GDN):** Banners responsivos com logo e slogan.</li>
                    </ul>
                </div>
                <div>
                    <p class="font-semibold text-gray-700">Conteúdo do Anúncio:</p>
                    <ul class="list-disc list-inside text-gray-700 text-sm ml-4">
                        <li>**TÍTULO:** "Infraestrutura de Pagamentos White Label para o seu Negócio."</li>
                        <li>**CORPO:** "Hopy Pay: A solução ideal para ofertar pagamentos com a sua marca."</li>
                        <li>**CTAs:** "Conheça a Hopy Pay", "Descubra Nossas Soluções".</li>
                        <li>**Objetivo:** Reconhecimento da marca e educação sobre o que a Hopy Pay faz.</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="funnel-arrow"></div>

        <!-- Meio do Funil (MoFu) -->
        <div class="funnel-segment bg-yellow-100 border-2 border-yellow-400 rounded-lg p-6 mb-6 relative">
            <h2 class="text-xl font-bold text-yellow-800 mb-2">MEIO DO FUNIL (MoFu)</h2>
            <p class="text-yellow-700 text-sm mb-4">Consideração e Interesse</p>
            <div class="flex items-center mb-2">
                <svg class="w-5 h-5 text-yellow-600 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8 4a4 4 0 100 8H6a2 2 0 00-2 2v1H1a1 1 0 00-1 1v3a1 1 0 001 1h3a1 1 0 001-1v-1h.586l.33.33A8 8 0 108 4zm6.293 8.293a1 1 0 001.414 0L19 9.414V16a1 1 0 001 1h3a1 1 0 001-1v-3a1 1 0 00-1-1h-3.586l-.33-.33A8 8 0 0014.293 8.293z" clip-rule="evenodd"></path></svg>
                <p class="text-gray-800 font-semibold">Ações do Usuário:</p>
            </div>
            <ul class="list-disc list-inside text-gray-700 text-sm space-y-1 ml-6">
                <li>Visitou Páginas de Solução Específica (ex: HopySplit, HopyHub, HopyCheckout)</li>
                <li>Clicou em "Saiba Mais" ou rolou a página para ver detalhes</li>
                <li>Acessou Conteúdos Específicos (ex: Integrações detalhadas, artigos no blog)</li>
            </ul>
            <div class="flex items-center mt-4">
                <svg class="w-5 h-5 text-yellow-600 mr-2" fill="currentColor" viewBox="0 0 20 20"><path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path><path fill-rule="evenodd" d="M4 5a2 2 0 012-2V1a1 1 0 011-1h2a1 1 0 011 1v2h2a2 2 0 012 2v10a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 0h6v10H7V5z" clip-rule="evenodd"></path></svg>
                <p class="text-gray-800 font-semibold">Eventos de Medição:</p>
            </div>
            <ul class="list-disc list-inside text-gray-700 text-sm space-y-1 ml-6">
                <li><code class="font-mono bg-yellow-200 px-1 rounded">ViewContent</code> (URLs específicas como <code class="font-mono bg-yellow-200 px-1 rounded">/hopy-split</code>, <code class="font-mono bg-yellow-200 px-1 rounded">/integracoes</code>)</li>
                <li><code class="font-mono bg-yellow-200 px-1 rounded">Click</code> (em CTAs de aprofundamento)</li>
            </ul>

            <div class="mt-6 border-t border-yellow-300 pt-4">
                <h3 class="text-lg font-bold text-yellow-800 mb-2">Estratégia de Anúncios (Instagram - Retargeting)</h3>
                <div class="mb-2">
                    <p class="font-semibold text-gray-700">Tipo de Anúncio:</p>
                    <ul class="list-disc list-inside text-gray-700 text-sm ml-4">
                        <li>**Meta Ads:** Vídeos de demonstração (30-60s), carrossel com funcionalidades específicas, Stories/Reels interativos (perguntas, enquetes).</li>
                        <li>**Google Display Network (GDN):** Banners focados na solução visitada.</li>
                    </ul>
                </div>
                <div>
                    <p class="font-semibold text-gray-700">Conteúdo do Anúncio:</p>
                    <ul class="list-disc list-inside text-gray-700 text-sm ml-4">
                        <li>**TÍTULO (Ex. HopySplit):** "HopySplit: Seu Gateway White Label com Multi-Adquirência Inteligente!"</li>
                        <li>**CORPO:** "Reduza custos e crie novas receitas. Veja como o HopySplit transforma seus pagamentos. [Benefício/dor específica da solução]"</li>
                        <li>**CTAs:** "Explore o HopySplit", "Veja as Vantagens", "Fazer uma Demonstração", "Baixe nosso E-book".</li>
                        <li>**Objetivo:** Aprofundar o interesse na solução específica e resolver objeções.</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="funnel-arrow"></div>

        <!-- Fundo do Funil (BoFu) -->
        <div class="funnel-segment bg-green-100 border-2 border-green-400 rounded-lg p-6 relative">
            <h2 class="text-xl font-bold text-green-800 mb-2">FUNDO DO FUNIL (BoFu)</h2>
            <p class="text-green-700 text-sm mb-4">Decisão e Conversão</p>
            <div class="flex items-center mb-2">
                <svg class="w-5 h-5 text-green-600 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>
                <p class="text-gray-800 font-semibold">Ações do Usuário:</p>
            </div>
            <ul class="list-disc list-inside text-gray-700 text-sm space-y-1 ml-6">
                <li>Preencheu formulário de contato (mas não finalizou)</li>
                <li>Solicitou uma demonstração (mas não confirmou)</li>
                <li>Visitou a página de confirmação após uma conversão (para nutrição pós-venda)</li>
            </ul>
            <div class="flex items-center mt-4">
                <svg class="w-5 h-5 text-green-600 mr-2" fill="currentColor" viewBox="0 0 20 20"><path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path><path fill-rule="evenodd" d="M4 5a2 2 0 012-2V1a1 1 0 011-1h2a1 1 0 011 1v2h2a2 2 0 012 2v10a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 0h6v10H7V5z" clip-rule="evenodd"></path></svg>
                <p class="text-gray-800 font-semibold">Eventos de Medição:</p>
            </div>
            <ul class="list-disc list-inside text-gray-700 text-sm space-y-1 ml-6">
                <li><code class="font-mono bg-green-200 px-1 rounded">FormSubmit</code> (em formulários de contato/demo)</li>
                <li><code class="font-mono bg-green-200 px-1 rounded">Thank You Page View</code> (URL da página de agradecimento)</li>
            </ul>

            <div class="mt-6 border-t border-green-300 pt-4">
                <h3 class="text-lg font-bold text-green-800 mb-2">Estratégia de Anúncios (Instagram - Retargeting)</h3>
                <div class="mb-2">
                    <p class="font-semibold text-gray-700">Tipo de Anúncio:</p>
                    <ul class="list-disc list-inside text-gray-700 text-sm ml-4">
                        <li>**Meta Ads:** Anúncios com prova social (depoimentos), senso de urgência (se houver promoções), diretos para WhatsApp/Formulário.</li>
                        <li>**Google Search Ads:** Anúncios de texto para termos de marca ou relacionados à finalização de contato.</li>
                    </ul>
                </div>
                <div>
                    <p class="font-semibold text-gray-700">Conteúdo do Anúncio:</p>
                    <ul class="list-disc list-inside text-gray-700 text-sm ml-4">
                        <li>**TÍTULO:** "Quase lá! Transforme seus Pagamentos com Hopy Pay."</li>
                        <li>**CORPO:** "Não perca a chance de ter sua própria infraestrutura de pagamentos. Agende sua Demonstração Gratuita Agora!"</li>
                        <li>**CTAs:** "Finalizar Agendamento", "Fale Conosco Agora", "Quero Minha Demo", "Agendar via WhatsApp".</li>
                        <li>**Objetivo:** Incentivar a conclusão da ação de contato ou agendamento, superando a última objeção.</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Section: Hopy Pay - Benefício Gratuito -->
        <div class="text-center mt-12 p-6 bg-blue-50 border border-blue-200 rounded-lg shadow-md">
            <h2 class="text-2xl font-bold text-blue-800 mb-4">🚀 Hopy Pay: Seu Sucesso é Nosso Negócio! 🚀</h2>
            <p class="text-blue-700 mb-4">Esta ferramenta é um **benefício gratuito** da Hopy Pay, feita para **clientes e não clientes**, com o objetivo de **ajudar sua empresa a escalar e otimizar sua jornada do cliente** através de estratégias de marketing eficazes. Conte com a gente para impulsionar seus resultados!</p>
            <p class="text-blue-700 font-semibold">Gere suas copies e eleve seu marketing a um novo nível!</p>
        </div>


        <!-- New LLM Feature Section -->
        <div class="mt-12 p-6 bg-gray-50 rounded-lg border border-gray-200 shadow-md">
            <h2 class="text-2xl font-bold text-gray-800 text-center mb-6">✨ Gerador de Copy de Marketing com IA ✨</h2>
            <p class="text-center text-gray-600 mb-6">Gere rapidamente títulos, corpo de texto e CTAs para suas campanhas!</p>

            <div class="space-y-4">
                <div>
                    <label for="apiKeyInput" class="block text-gray-700 text-sm font-semibold mb-2">Sua Chave de API Gemini:</label>
                    <input type="text" id="apiKeyInput" class="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Cole sua chave de API aqui">
                    <p class="text-gray-500 text-xs mt-1">Obtenha sua chave em <a href="https://aistudio.google.com/" target="_blank" class="text-blue-500 hover:underline">Google AI Studio</a></p>
                </div>
                <div>
                    <label for="productDescription" class="block text-gray-700 text-sm font-semibold mb-2">Descrição do Produto/Serviço (da Hopy Pay):</label>
                    <textarea id="productDescription" class="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" rows="3" placeholder="Ex: HopySplit, nosso gateway white label com multi-adquirência e split inteligente."></textarea>
                </div>

                <div>
                    <label for="targetAudience" class="block text-gray-700 text-sm font-semibold mb-2">Público-Alvo:</label>
                    <input type="text" id="targetAudience" class="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Ex: Donos de e-commerce, diretores de fintech, marketplaces.">
                </div>

                <div>
                    <label for="funnelStage" class="block text-gray-700 text-sm font-semibold mb-2">Etapa do Funil:</label>
                    <select id="funnelStage" class="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="ToFu">Topo do Funil (Consciência)</option>
                        <option value="MoFu">Meio do Funil (Consideração)</option>
                        <option value="BoFu">Fundo do Funil (Decisão)</option>
                    </select>
                </div>

                <div class="flex space-x-4 mt-4">
                    <button id="generateCopyBtn" class="flex-1 bg-blue-600 text-white font-bold p-3 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 flex items-center justify-center">
                        <span id="buttonText">Gerar Copy de Marketing ✨</span>
                        <div id="loadingSpinner" class="loading-spinner ml-3 hidden"></div>
                    </button>
                    <button id="resetBtn" class="flex-1 bg-gray-300 text-gray-800 font-bold p-3 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50">
                        Refazer
                    </button>
                </div>

                <div id="copyOutput" class="mt-6 hidden">
                    <!-- Generated copies will be displayed here -->
                </div>
                <div id="errorMessage" class="mt-4 text-red-600 text-sm hidden">
                    <!-- Error messages will be displayed here -->
                </div>
                
                <div id="recommendations" class="mt-6 p-4 bg-purple-50 border border-purple-200 rounded-md text-gray-800 text-sm hidden">
                    <h3 class="text-lg font-bold text-purple-800 mb-2">💡 Recomendações e Dicas de Marketing:</h3>
                    <ul class="list-disc list-inside space-y-2">
                        <!-- Recommendations will be injected here -->
                    </ul>
                </div>

                <div id="generalResources" class="mt-6 p-4 bg-gray-100 border border-gray-300 rounded-md text-gray-800 text-sm hidden">
                    <h3 class="text-lg font-bold text-gray-800 mb-2">📚 Ferramentas e Recursos Adicionais:</h3>
                    <ul class="list-disc list-inside space-y-2">
                        <!-- Dynamic resources will be injected here -->
                    </ul>
                </div>
            </div>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const generateCopyBtn = document.getElementById('generateCopyBtn');
            const resetBtn = document.getElementById('resetBtn');
            const apiKeyInput = document.getElementById('apiKeyInput');
            const productDescription = document.getElementById('productDescription');
            const targetAudience = document.getElementById('targetAudience');
            const funnelStage = document.getElementById('funnelStage');
            const copyOutput = document.getElementById('copyOutput');
            const errorMessage = document.getElementById('errorMessage');
            const loadingSpinner = document.getElementById('loadingSpinner');
            const buttonText = document.getElementById('buttonText');
            const recommendationsDiv = document.getElementById('recommendations');
            const recommendationsList = recommendationsDiv.querySelector('ul');
            const generalResourcesDiv = document.getElementById('generalResources');
            const generalResourcesList = generalResourcesDiv.querySelector('ul');

            const recommendations = {
                ToFu: [
                    "**Para Instagram (Orgânico/Tráfego Pago):** Crie Reels curtos e chamativos com 'ganchos' que despertem a curiosidade sobre 'pagamentos inteligentes'. Use carrosséis com 'Você sabia...?'",
                    "**Dica de Conteúdo:** Conteúdo educativo e de fácil consumo. Pense em 'micro-aulas' sobre o mercado de pagamentos ou problemas comuns que a Hopy Pay resolve. Mantenha a copy leve e intrigante.",
                    "**CTAs no Instagram:** 'Saiba Mais no Link da Bio', 'Explore nosso Perfil', 'Deslize para ver mais (Carrossel)', 'Assista ao Reel Completo'."
                ],
                MoFu: [
                    "**Para Instagram (Retargeting):** Use Stories/Reels com demonstrações rápidas do produto ou depoimentos de clientes sobre os benefícios específicos (ex: HopySplit). Invista em 'arrasta para cima' para landing pages de soluções.",
                    "**Dica de Conteúdo:** Foque em resolver dores específicas do público. Apresente features do HopySplit, HopyHub ou HopyCheckout e mostre como elas se traduzem em resultados (ex: 'redução de custos', 'nova fonte de receita').",
                    "**CTAs no Instagram:** 'Explore o HopySplit', 'Veja o HopyHub em Ação', 'Baixe o Guia Gratuito', 'Fale com um Especialista via Direct'."
                ],
                BoFu: [
                    "**Para Instagram (Retargeting de Alta Intenção):** Anúncios no Feed ou Stories com senso de urgência (se aplicável), provas sociais fortes e CTAs diretos para agendamento/contato. Use o botão de WhatsApp direto nos anúncios do Meta.",
                    "**Dica de Conteúdo:** Utilize depoimentos de clientes com cases de sucesso (números e resultados). Reforce a credibilidade da Hopy Pay (R$ 4 bilhões em volume, 125 mil clientes). A copy deve ser a mais persuasiva possível, focando no 'porquê agir agora'.",
                    "**CTAs no Instagram:** 'Agende Sua Demo', 'Quero Transformar Meus Pagamentos', 'Fale Agora no WhatsApp', 'Preencha o Formulário'."
                ]
            };

            const dynamicResources = {
                ToFu: [
                    // Set 1 for ToFu
                    [
                        {
                            category: "Criação de Conteúdo para Redes Sociais",
                            items: [
                                { name: "Canva", link: "https://www.canva.com/", description: "Design gráfico simplificado para posts e stories." },
                                { name: "CapCut", link: "https://www.capcut.com/", description: "Edição de vídeo para Reels e Stories impactantes." },
                                { name: "Unsplash/Pexels", link: "https://unsplash.com/", description: "Bancos de imagens gratuitas de alta qualidade." }
                            ]
                        },
                        {
                            category: "Programação e Análise de Redes Sociais",
                            items: [
                                { name: "Later/Buffer", link: "https://later.com/", description: "Ferramentas para agendamento de posts no Instagram." },
                                { name: "Instagram Insights (Natívo)", description: "Métricas básicas de desempenho de conteúdo." }
                            ]
                        },
                        {
                            category: "Livros e Blogs de Reconhecimento",
                            items: [
                                { name: "Marketing de Conteúdo para o Instagram", link: "https://www.amazon.com.br/marketing-de-conteudo-para-instagram-ebook/dp/B0CKD81W62", description: "Guia completo para estratégias de conteúdo visual." },
                                { name: "Social Media Examiner", link: "https://www.socialmediaexaminer.com/", description: "Blog com as últimas tendências de mídias sociais." }
                            ]
                        }
                    ],
                    // Set 2 for ToFu (varied)
                    [
                        {
                            category: "Ferramentas de Design e Edição",
                            items: [
                                { name: "Figma", link: "https://www.figma.com/", description: "Ferramenta colaborativa para design de interfaces e gráficos." },
                                { name: "InShot", link: "https://inshot.com/", description: "App de edição de vídeo mobile para conteúdo rápido." }
                            ]
                        },
                        {
                            category: "Estratégia de Marketing Digital",
                            items: [
                                { name: "Neil Patel Brasil", link: "https://neilpatel.com/br/blog/", description: "Dicas de SEO e marketing de conteúdo." },
                                { name: "Blog da Rock Content", link: "https://rockcontent.com/br/blog/", description: "Conteúdo focado em marketing de conteúdo e inbound." }
                            ]
                        },
                        {
                            category: "Livros e Conceitos Fundamentais",
                            items: [
                                { name: "A Vaca Roxa", link: "https://www.amazon.com.br/Vaca-Roxa-Se-diferencie-Mercado/dp/8575221085", description: "Por Seth Godin, sobre se destacar no mercado." },
                                { name: "Inbound Marketing", link: "https://www.amazon.com.br/Inbound-Marketing-atrair-conquistar-clientes/dp/8550800360", description: "Livro fundamental para estratégias de atração." }
                            ]
                        }
                    ]
                ],
                MoFu: [
                    // Set 1 for MoFu
                    [
                        {
                            category: "Otimização de Landing Pages",
                            items: [
                                { name: "Unbounce/Leadpages", link: "https://unbounce.com/", description: "Criação e otimização de páginas de captura de leads." },
                                { name: "Google Optimize (agora via Google Analytics 4)", link: "https://support.google.com/optimize/", description: "Ferramenta para testes A/B em páginas." }
                            ]
                        },
                        {
                            category: "Automação de Marketing e CRM",
                            items: [
                                { name: "RD Station Marketing", link: "https://rdstation.com/marketing/", description: "Automação de e-mail marketing e nutrição de leads." },
                                { name: "HubSpot CRM (versão gratuita)", link: "https://www.hubspot.com/products/crm", description: "Gestão de relacionamento com leads e clientes." }
                            ]
                        },
                        {
                            category: "Conteúdo Interativo para Engajamento",
                            items: [
                                { name: "Typeform", link: "https://www.typeform.com/", description: "Criação de formulários interativos e quizzes." },
                                { name: "E-books e Webinars (Hopy Pay)", description: "Materiais ricos para aprofundar o interesse do lead." }
                            ]
                        },
                        {
                            category: "Livros e Blogs de Consideração",
                            items: [
                                { name: "Contagioso: Como fazer as coisas pegarem", link: "https://www.amazon.com.br/Contagioso-Como-fazer-coisas-pegarem/dp/8580575304", description: "Entenda o que torna o conteúdo viral e engajador." },
                                { name: "Hotmart Blog", link: "https://blog.hotmart.com/pt-br/", description: "Dicas de funil de vendas e infoprodutos." }
                            ]
                        }
                    ],
                    // Set 2 for MoFu (varied)
                    [
                        {
                            category: "Análise de Funil e Jornada",
                            items: [
                                { name: "Mixpanel", link: "https://mixpanel.com/", description: "Análise de comportamento do usuário e funis de conversão." },
                                { name: "Amplitude", link: "https://amplitude.com/", description: "Plataforma de inteligência de produto e análise de usuários." }
                            ]
                        },
                        {
                            category: "Ferramentas de E-mail Marketing",
                            items: [
                                { name: "Mailchimp", link: "https://mailchimp.com/", description: "Plataforma popular para campanhas de e-mail marketing." },
                                { name: "ActiveCampaign", link: "https://www.activecampaign.com/", description: "Automação avançada e CRM para nutrição." }
                            ]
                        },
                        {
                            category: "Livros e Conceitos de Nutrição",
                            items: [
                                { name: "Marketing 4.0", link: "https://www.amazon.com.br/Marketing-4-0-Philip-Kotler/dp/8543104646", description: "Sobre a transição do marketing tradicional para o digital." },
                                { name: "As Armas da Persuasão", link: "https://www.amazon.com.br/Armas-Persuas%C3%A3o-Robert-Cialdini/dp/8575221085", description: "Entenda os princípios da influência e persuasão." }
                            ]
                        }
                    ]
                ],
                BoFu: [
                    // Set 1 for BoFu
                    [
                        {
                            category: "Ferramentas de Conversão Direta",
                            items: [
                                { name: "WhatsApp Business API", link: "https://developers.facebook.com/docs/whatsapp/api/", description: "Comunicação direta e automatizada com leads qualificados." },
                                { name: "Chatbots para Site", link: "https://www.zendesk.com/service/conversational-ai/chatbot/", description: "Automação de atendimento para qualificação e agendamento." },
                                { name: "Calendly/Acuity Scheduling", link: "https://calendly.com/", description: "Ferramentas para agendamento de demonstrações." }
                            ]
                        },
                        {
                            category: "Otimização de Taxa de Conversão (CRO)",
                            items: [
                                { name: "Hotjar", link: "https://www.hotjar.com/", description: "Mapas de calor e gravações de sessão para entender o comportamento do usuário." },
                                { name: "Google Analytics 4 (GA4)", description: "Análise aprofundada de eventos de conversão e jornadas." }
                            ]
                        },
                        {
                            category: "Provas Sociais e Cases de Sucesso",
                            items: [
                                { name: "Hopy Pay Clientes & Cases", link: "https://www.hopypay.com.br/quem-somos", description: "Página de depoimentos e cases da Hopy Pay." }
                            ]
                        },
                        {
                            category: "Livros e Blogs de Vendas/Conversão",
                            items: [
                                { name: "Receita Previsível" , link: "https://www.amazon.com.br/Receita-Previs%C3%ADvel-empresas-dobrarem-resultados/dp/8582890288", description: "Livro por Aaron Ross sobre escalar vendas." },
                                { name: "Spin Selling" , link: "https://www.amazon.com.br/Spin-Selling-Neil-Rackham/dp/8575225102", description: "Livro por Neil Rackham sobre técnicas de venda." }
                            ]
                        }
                    ],
                    // Set 2 for BoFu (varied)
                    [
                        {
                            category: "Plataformas de Anúncios e Retargeting",
                            items: [
                                { name: "Google Ads", link: "https://ads.google.com/", description: "Criação de campanhas de pesquisa e display." },
                                { name: "Meta Ads (Facebook/Instagram)", link: "https://business.facebook.com/", description: "Gerenciamento de anúncios em redes sociais." }
                            ]
                        },
                        {
                            category: "Automação de Vendas",
                            items: [
                                { name: "Salesforce Sales Cloud", link: "https://www.salesforce.com/br/products/sales-cloud/overview/", description: "Plataforma CRM robusta para gestão de vendas." },
                                { name: "Pipedrive", link: "https://www.pipedrive.com/pt", description: "CRM focado em funil de vendas e automação." }
                            ]
                        },
                        {
                            category: "Livros e Táticas de Fechamento",
                            items: [
                                { name: "A Estratégia do Oceano Azul", link: "https://www.amazon.com.br/Estrategia-do-Oceano-Azul-Competir/dp/8535218764", description: "Sobre como criar novos espaços de mercado." },
                                { name: "Marketing de Permissão", link: "https://www.amazon.com.br/Marketing-Permiss%C3%A3o-Seth-Godin/dp/8575220453", description: "Conceitos sobre o marketing que gera engajamento voluntário." }
                            ]
                        },
                        {
                            category: "Análise de ROI e Performance",
                            items: [
                                { name: "Supermetrics", link: "https://supermetrics.com/", description: "Conecta dados de marketing em uma única plataforma para análise." }
                            ]
                        }
                    ]
                ]
            };


            function displayRecommendations(stage) {
                recommendationsList.innerHTML = ''; // Clear previous recommendations
                const generalTips = recommendations[stage];
                generalTips.forEach(tip => {
                    const li = document.createElement('li');
                    li.innerHTML = tip; // Use innerHTML to allow for bold tags and other formatting if needed
                    recommendationsList.appendChild(li);
                });
                recommendationsDiv.classList.remove('hidden');
            }

            function displayDynamicResources(stage) {
                generalResourcesList.innerHTML = ''; // Clear previous resources
                const stageResources = dynamicResources[stage];
                // Randomly select one set of resources for the current stage
                const randomIndex = Math.floor(Math.random() * stageResources.length);
                const selectedResources = stageResources[randomIndex];

                selectedResources.forEach(resourceCategory => {
                    const categoryHeader = document.createElement('h4');
                    categoryHeader.className = 'font-semibold text-gray-700 mt-3 mb-1';
                    categoryHeader.textContent = resourceCategory.category + ':';
                    generalResourcesList.appendChild(categoryHeader);

                    const categoryList = document.createElement('ul');
                    categoryList.className = 'list-disc list-inside ml-4 space-y-1';

                    resourceCategory.items.forEach(item => {
                        const li = document.createElement('li');
                        if (item.link) {
                            li.innerHTML = `<a href="${item.link}" target="_blank" class="text-blue-500 hover:underline">${item.name}</a>: ${item.description}`;
                        } else {
                            li.textContent = `${item.name}: ${item.description}`;
                        }
                        categoryList.appendChild(li);
                    });
                    generalResourcesList.appendChild(categoryList);
                });
                generalResourcesDiv.classList.remove('hidden'); // Ensure it's hidden before showing if there are no items
                if (selectedResources.length > 0) {
                    generalResourcesDiv.classList.remove('hidden');
                }
            }

            function clearResults() {
                copyOutput.innerHTML = '';
                copyOutput.classList.add('hidden');
                errorMessage.classList.add('hidden');
                recommendationsDiv.classList.add('hidden');
                recommendationsList.innerHTML = '';
                generalResourcesDiv.classList.add('hidden'); // Hide dynamic resources on clear
                generalResourcesList.innerHTML = '';
            }

            resetBtn.addEventListener('click', clearResults);

            generateCopyBtn.addEventListener('click', async () => {
                const apiKey = apiKeyInput.value.trim();
                const prodDesc = productDescription.value.trim();
                const targetAud = targetAudience.value.trim();
                const stage = funnelStage.value;

                clearResults(); // Clear previous results on new generation attempt

                if (!apiKey) {
                    errorMessage.textContent = 'Por favor, insira sua chave de API Gemini.';
                    errorMessage.classList.remove('hidden');
                    return;
                }

                if (!prodDesc || !targetAud) {
                    errorMessage.textContent = 'Por favor, preencha a descrição do produto/serviço e o público-alvo.';
                    errorMessage.classList.remove('hidden');
                    return;
                }

                loadingSpinner.classList.remove('hidden');
                buttonText.textContent = 'Gerando...';
                generateCopyBtn.disabled = true;
                resetBtn.disabled = true; // Disable reset button during generation

                try {
                    // Updated prompt to focus on Instagram specifics
                    const prompt = `Gere 5 variações de copy de marketing focadas para Instagram, para a etapa do funil ${stage} para o produto/serviço: '${prodDesc}', visando o público: '${targetAud}'. Para cada variação, inclua um TÍTULO, um CORPO de texto conciso (mencionando se é para Feed, Stories ou Reels) e 3 sugestões de CTA (incluindo opções como 'Link na Bio' ou 'Arrasta para Cima'). Separe cada variação com '---VARIAÇÃO---'.`;

                    let chatHistory = [];
                    chatHistory.push({ role: "user", parts: [{ text: prompt }] });

                    const payload = {
                        contents: chatHistory
                    };

                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(`Erro na API: ${errorData.error.message || response.statusText}`);
                    }

                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const rawText = result.candidates[0].content.parts[0].text;
                        const variations = rawText.split('---VARIAÇÃO---').filter(v => v.trim() !== '');
                        
                        if (variations.length > 0) {
                            copyOutput.innerHTML = ''; // Clear previous content
                            variations.forEach((variation, index) => {
                                const section = document.createElement('div');
                                section.className = 'p-3 bg-white border border-gray-200 rounded-md mb-4';
                                section.innerHTML = `<h4 class="font-bold text-md text-gray-700 mb-2">Variação ${index + 1}:</h4><div class="text-gray-600 text-sm">${variation.trim().replace(/\n/g, '<br>')}</div>`;
                                copyOutput.appendChild(section);
                            });
                            copyOutput.classList.remove('hidden');
                            displayRecommendations(stage); // Display recommendations after copies
                            displayDynamicResources(stage); // Display dynamic resources based on stage
                        } else {
                            throw new Error('Nenhuma variação de copy foi gerada. Tente ajustar a descrição.');
                        }
                    } else {
                        throw new Error('Estrutura de resposta da API inesperada ou conteúdo vazio.');
                    }

                } catch (error) {
                    console.error('Erro ao chamar a API Gemini:', error);
                    errorMessage.textContent = `Ocorreu um erro ao gerar a copy: ${error.message}. Verifique sua chave de API e tente novamente.`;
                    errorMessage.classList.remove('hidden');
                } finally {
                    loadingSpinner.classList.add('hidden');
                    buttonText.textContent = 'Gerar Copy de Marketing ✨';
                    generateCopyBtn.disabled = false;
                    resetBtn.disabled = false; // Enable reset button after generation
                }
            });
        });
    </script>
</body>
</html>
